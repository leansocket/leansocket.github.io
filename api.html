<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Classes | nodex-libs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.b9d05ae7.js" as="script"><link rel="preload" href="/assets/js/2.926c100e.js" as="script"><link rel="preload" href="/assets/js/7.5bba90ff.js" as="script"><link rel="prefetch" href="/assets/js/10.91ade790.js"><link rel="prefetch" href="/assets/js/3.3fa906df.js"><link rel="prefetch" href="/assets/js/4.e05c873c.js"><link rel="prefetch" href="/assets/js/5.f3e6ed41.js"><link rel="prefetch" href="/assets/js/6.498ab014.js"><link rel="prefetch" href="/assets/js/8.dfde9755.js"><link rel="prefetch" href="/assets/js/9.beb31b24.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">nodex-libs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/api.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  Demo
</a></div><div class="nav-item"><a href="/cli.html" class="nav-link">
  CLI
</a></div> <a href="https://github.com/leansocket/nodex-libs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/api.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  Demo
</a></div><div class="nav-item"><a href="/cli.html" class="nav-link">
  CLI
</a></div> <a href="https://github.com/leansocket/nodex-libs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Classes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api.html#classes" class="sidebar-link">Classes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#members" class="sidebar-link">Members</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#functions" class="sidebar-link">Functions</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#token" class="sidebar-link">Token</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-token-secret-timeout" class="sidebar-link">new Token(secret, timeout)</a></li><li class="sidebar-sub-header"><a href="/api.html#token-sign" class="sidebar-link">token.sign()</a></li><li class="sidebar-sub-header"><a href="/api.html#token-make-data-⇒-string" class="sidebar-link">token.make(data) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#token-check-token-⇒-tokensession" class="sidebar-link">token.check(token) ⇒</a></li></ul></li><li><a href="/api.html#code" class="sidebar-link">Code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-code-length-timeout" class="sidebar-link">new Code(length, timeout)</a></li><li class="sidebar-sub-header"><a href="/api.html#code-make-type-to-⇒-string" class="sidebar-link">code.make(type, to) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#code-check-type-to-⇒-codesession" class="sidebar-link">code.check(type, to) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#code-clear" class="sidebar-link">code.clear()</a></li></ul></li><li><a href="/api.html#key" class="sidebar-link">Key</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-key-length-timeout" class="sidebar-link">new Key(length, timeout)</a></li><li class="sidebar-sub-header"><a href="/api.html#key-make-data-⇒-string" class="sidebar-link">key.make(data) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#key-check-key-⇒-keysession" class="sidebar-link">key.check(key) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#key-clear" class="sidebar-link">key.clear()</a></li></ul></li><li><a href="/api.html#flake" class="sidebar-link">Flake</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-flake-nodeid" class="sidebar-link">new Flake(nodeId)</a></li><li class="sidebar-sub-header"><a href="/api.html#flake-get" class="sidebar-link">flake.get()</a></li></ul></li><li><a href="/api.html#connection" class="sidebar-link">Connection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#connection-query-sql-logsql-⇒-any" class="sidebar-link">connection.query(sql, logsql) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#connection-page-sql-page-size-⇒-any" class="sidebar-link">connection.page(sql, page, size) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#connection-transaction" class="sidebar-link">connection.transaction()</a></li><li class="sidebar-sub-header"><a href="/api.html#connection-commit" class="sidebar-link">connection.commit()</a></li><li class="sidebar-sub-header"><a href="/api.html#connection-rollback" class="sidebar-link">connection.rollback()</a></li><li class="sidebar-sub-header"><a href="/api.html#connection-release" class="sidebar-link">connection.release()</a></li></ul></li><li><a href="/api.html#mysql" class="sidebar-link">MySql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#mysql-init" class="sidebar-link">mySql.init()</a></li><li class="sidebar-sub-header"><a href="/api.html#mysql-connect-transaction-⇒-connection" class="sidebar-link">mySql.connect(transaction) ⇒ [](#Connection)</a></li><li class="sidebar-sub-header"><a href="/api.html#mysql-transaction" class="sidebar-link">mySql.transaction()</a></li><li class="sidebar-sub-header"><a href="/api.html#mysql-query-sql-logsql-⇒-any" class="sidebar-link">mySql.query(sql, logsql) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#mysql-page-sql-page-size-⇒-any" class="sidebar-link">mySql.page(sql, page, size) ⇒</a></li></ul></li><li><a href="/api.html#schedule" class="sidebar-link">Schedule</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-schedule-schedule-precision" class="sidebar-link">new Schedule(schedule, precision)</a></li><li class="sidebar-sub-header"><a href="/api.html#schedule-running" class="sidebar-link">schedule.running</a></li><li class="sidebar-sub-header"><a href="/api.html#schedule-start-task-⇒-boolean" class="sidebar-link">schedule.start(task) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#schedule-stop" class="sidebar-link">schedule.stop()</a></li></ul></li><li><a href="/api.html#channel" class="sidebar-link">Channel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#channel-send" class="sidebar-link">channel.send()</a></li><li class="sidebar-sub-header"><a href="/api.html#channel-sendquickly" class="sidebar-link">channel.sendQuickly()</a></li></ul></li><li><a href="/api.html#duration" class="sidebar-link">Duration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-duration-duration" class="sidebar-link">new Duration(duration)</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-value" class="sidebar-link">duration.value</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-accuratemilliseconds" class="sidebar-link">duration.accurateMilliseconds</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-accurateseconds" class="sidebar-link">duration.accurateSeconds</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-accurateminutes" class="sidebar-link">duration.accurateMinutes</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-accuratehours" class="sidebar-link">duration.accurateHours</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-accuratedays" class="sidebar-link">duration.accurateDays</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-accuratemonths" class="sidebar-link">duration.accurateMonths</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-accurateyears" class="sidebar-link">duration.accurateYears</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-milliseconds" class="sidebar-link">duration.milliseconds</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-seconds" class="sidebar-link">duration.seconds</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-minutes" class="sidebar-link">duration.minutes</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-hours" class="sidebar-link">duration.hours</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-days" class="sidebar-link">duration.days</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-months" class="sidebar-link">duration.months</a></li><li class="sidebar-sub-header"><a href="/api.html#duration-years" class="sidebar-link">duration.years</a></li></ul></li><li><a href="/api.html#timespan" class="sidebar-link">TimeSpan</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-timespan-begin-end" class="sidebar-link">new TimeSpan(begin, end)</a></li><li class="sidebar-sub-header"><a href="/api.html#timespan-begin" class="sidebar-link">timeSpan.begin</a></li><li class="sidebar-sub-header"><a href="/api.html#timespan-end" class="sidebar-link">timeSpan.end</a></li><li class="sidebar-sub-header"><a href="/api.html#timespan-duration" class="sidebar-link">timeSpan.duration</a></li><li class="sidebar-sub-header"><a href="/api.html#timespan-include-timepoint-⇒-boolean" class="sidebar-link">timeSpan.include(timePoint) ⇒</a></li><li class="sidebar-sub-header"><a href="/api.html#timespan-expand-⇒-timepoint-timespan" class="sidebar-link">timeSpan.expand() ⇒ [](#TimeSpan)</a></li></ul></li><li><a href="/api.html#timepoint" class="sidebar-link">TimePoint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api.html#new-timepoint-timestamp" class="sidebar-link">new TimePoint(timestamp)</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-value" class="sidebar-link">timePoint.value</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-datetime" class="sidebar-link">timePoint.dateTime</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-thissecond" class="sidebar-link">timePoint.thisSecond</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-thisminute" class="sidebar-link">timePoint.thisMinute</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-thishour" class="sidebar-link">timePoint.thisHour</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-thisday" class="sidebar-link">timePoint.thisDay</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-thisweek" class="sidebar-link">timePoint.thisWeek</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-thismonth" class="sidebar-link">timePoint.thisMonth</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-thisyear" class="sidebar-link">timePoint.thisYear</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-tostring" class="sidebar-link">timePoint.toString()</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-add-duration-⇒-timepoint" class="sidebar-link">timePoint.add(duration) ⇒ [](#TimePoint)</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-sub-duration-⇒-timepoint" class="sidebar-link">timePoint.sub(duration) ⇒ [](#TimePoint)</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-from-timepoint-⇒-timepoint" class="sidebar-link">timePoint.from(timePoint) ⇒ [](#TimePoint)</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-to-timepoint-⇒-timepoint" class="sidebar-link">timePoint.to(timePoint) ⇒ [](#TimePoint)</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-now" class="sidebar-link">TimePoint.now()</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-utc" class="sidebar-link">TimePoint.utc()</a></li><li class="sidebar-sub-header"><a href="/api.html#timepoint-parse" class="sidebar-link">TimePoint.parse()</a></li></ul></li><li><a href="/api.html#webapp" class="sidebar-link">WebApp</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#hopbyhopheaders" class="sidebar-link">hopByHopHeaders</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#ishttps" class="sidebar-link">isHttps()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#combineurlandparams" class="sidebar-link">combineUrlAndParams()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#sign-data-secret-⇒-string" class="sidebar-link">sign(data, secret) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#getrequestoptions" class="sidebar-link">getRequestOptions()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#request" class="sidebar-link">request()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#get" class="sidebar-link">get()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#post" class="sidebar-link">post()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#call" class="sidebar-link">call()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#makerpc" class="sidebar-link">makeRPC()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rpc" class="sidebar-link">rpc()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#setup-proxyserver-proxyoptions" class="sidebar-link">setup(proxyServer, proxyOptions)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#eachheader" class="sidebar-link">eachHeader()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#onrequest" class="sidebar-link">onrequest()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#onconnect" class="sidebar-link">onconnect()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#authenticate-server-req-fn" class="sidebar-link">authenticate(server, req, fn)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#requestauthorization" class="sidebar-link">requestAuthorization()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#webapp-2" class="sidebar-link">webapp()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#body" class="sidebar-link">body()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#send" class="sidebar-link">send()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#sendfile" class="sidebar-link">sendFile()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#handler" class="sidebar-link">handler()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rules" class="sidebar-link">rules</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#ms-per-second" class="sidebar-link">MS_PER_SECOND</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#ms-per-minute" class="sidebar-link">MS_PER_MINUTE</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#ms-per-hour" class="sidebar-link">MS_PER_HOUR</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#ms-per-day" class="sidebar-link">MS_PER_DAY</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#ms-per-week" class="sidebar-link">MS_PER_WEEK</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#error-错误名称-推荐使用形如-err-invalid-args-的命名规则-具体业务不做强制要求。-message-⇒-error" class="sidebar-link">error(错误名称，推荐使用形如‘ERRINVALIDARGS’的命名规则，具体业务不做强制要求。, message) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#checkerror" class="sidebar-link">checkError()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#make" class="sidebar-link">make()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#hash-alg-data-⇒-string" class="sidebar-link">hash(alg, data) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#md5-data-⇒-string" class="sidebar-link">md5(data) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#sha256-data-⇒-string" class="sidebar-link">sha256(data) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#encode-aes-256-cbc-key-content-⇒-string" class="sidebar-link">encode_aes_256_cbc(key, content) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#decode-aes-256-cbc-key-content-⇒-string" class="sidebar-link">decode_aes_256_cbc(key, content) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#encode-base64-content-⇒-string" class="sidebar-link">encode_base64(content) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#decode-base64-content-⇒-string" class="sidebar-link">decode_base64(content) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#encode-hex64-content-⇒" class="sidebar-link">encode_hex64(content) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#decode-hex64-content-⇒-string" class="sidebar-link">decode_hex64(content) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rs-length-characters-⇒-string" class="sidebar-link">rs(length, characters) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rsod-len-⇒-string" class="sidebar-link">rsod(len) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rsox-len-⇒-string" class="sidebar-link">rsox(len) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rsoa-len-⇒-string" class="sidebar-link">rsoa(len) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rsow-len-⇒-string" class="sidebar-link">rsow(len) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#rsop-len-⇒-string" class="sidebar-link">rsop(len) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#create-⇒-flake" class="sidebar-link">create() ⇒ [](#Flake)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#has-obj-field-⇒-boolean" class="sidebar-link">has(obj, field) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#hasone-obj-fields-⇒-boolean" class="sidebar-link">hasOne(obj, fields) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#hasall-obj-fields-⇒-boolean" class="sidebar-link">hasAll(obj, fields) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#assertone-obj-fields" class="sidebar-link">assertOne(obj, fields)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#assertall-obj-fields" class="sidebar-link">assertAll(obj, fields)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#optional-field-format-minlen-maxlen-defaultvalue-⇒-boolean" class="sidebar-link">optional(field, format, minlen, maxlen, defaultValue) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#required-field-format-minlen-maxlen-⇒-boolean" class="sidebar-link">required(field, format, minlen, maxlen) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#decompress" class="sidebar-link">decompress()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#decode" class="sidebar-link">decode()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#escape" class="sidebar-link">escape()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#init-scope" class="sidebar-link">init(scope)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#init" class="sidebar-link">init()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#connect-transaction-⇒-connection" class="sidebar-link">connect(transaction) ⇒ [](#Connection)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#transaction" class="sidebar-link">transaction()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#query-sql-logsql-⇒-any" class="sidebar-link">query(sql, logsql) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#page-sql-page-size-⇒-any" class="sidebar-link">page(sql, page, size) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#exec" class="sidebar-link">exec()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#execsync" class="sidebar-link">execSync()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#duration-ms-⇒-duration" class="sidebar-link">duration(ms) ⇒ [](#Duration)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#span-begintimestamp-endtimestamp-⇒-timespan" class="sidebar-link">span(beginTimeStamp, endTimeStamp) ⇒ [](#TimeSpan)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#point-timestamp-⇒-timepoint" class="sidebar-link">point(timestamp) ⇒ [](#TimePoint)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#now" class="sidebar-link">now()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#utc" class="sidebar-link">utc()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#parse" class="sidebar-link">parse()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#add-timepoint-duration-⇒-timepoint" class="sidebar-link">add(timePoint, duration) ⇒ [](#TimePoint)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#sub-timepoint-duration-⇒-timepoint" class="sidebar-link">sub(timePoint, duration) ⇒ [](#TimePoint)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#delay-time" class="sidebar-link">delay(time)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#absolutepath" class="sidebar-link">absolutePath()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#camelcase" class="sidebar-link">camelCase()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#camelcasekeys" class="sidebar-link">camelCaseKeys()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#compareversion-versiona-versionb-⇒-number" class="sidebar-link">compareVersion(versionA, versionB) ⇒</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/api.html#computegeodistance" class="sidebar-link">computeGeoDistance()</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="classes"><a href="#classes" class="header-anchor">#</a> Classes</h2> <dl><dt><a href="#WebApp">WebApp</a></dt> <dd><p>WebApp</p> <ul><li>Web服务端应用，从Koa继承而来。</li></ul></dd></dl> <dl><dt><a href="#Token">Token</a></dt> <dd><p>Token,这是一个简易的对称加密token工具类。用于实现用户身份的鉴别。
一个典型的token表现为一段被加密的字符串，加密串内含用于身份鉴别和
安全校验的信息。</p></dd> <dt><a href="#Code">Code</a></dt> <dd><p>验证码</p> <ul><li>此类用于创建验证码对象。验证码对象可识别用户操作是否属于本人。</li> <li>验证码是一串有限长度（通常是4-8个）的数字字符串。验证码生成后可发到用户信任的手机或邮箱。</li> <li>验证码都有时效性，超时后验证码将会失效，失效的验证码将不会通过检查。</li> <li>此类只用于生成验证码字符串或检查验证码字符串的合法性。如果期望发送手机短信或邮件需要专门
的模块（sms或smtp）进行。</li></ul></dd> <dt><a href="#Key">Key</a></dt> <dd><p>验证键</p> <ul><li>验证键是一种特殊的验证码。它和普通验证码的区别是能保证唯一性。</li> <li>这种唯一性不是全局唯一，是在所有已经生成但未检查的编码中的唯一，
即如果现已经生成1000个编码都还未检查也未失效，新生成的验证键值能保证与
当前这1000个键值都不同。</li></ul></dd> <dt><a href="#Flake">Flake</a></dt> <dd><p>雪花算法唯一编码生成器</p> <ul><li>此类采用flake算法生成唯一编码。</li> <li>此类能同时支持156个节点，每个节点每毫秒生成2^24个唯一编码。</li> <li>此类生成的唯一编码是一个由20个十六进制字符组成的串。</li></ul></dd> <dt><a href="#Connection">Connection</a></dt> <dd><p>数据库链接对象</p></dd> <dt><a href="#MySql">MySql</a></dt> <dd><p>mysql数据库访问对象</p></dd> <dt><a href="#Schedule">Schedule</a></dt> <dd><p>日程</p> <ul><li>日程是为了解决在特定的时刻执行任务的需求，例如：每周星期二上午九点执行任务A。</li> <li>日程不是解决每隔单位时间执行任务的需求，如：每隔30秒执行任务B，你可以用计时器
setInterval之类的方法完成这类需求。</li></ul></dd> <dt><a href="#Channel">Channel</a></dt> <dd><p>邮件发送通道</p></dd> <dt><a href="#Duration">Duration</a></dt> <dd><p>时间段，代表两个时间点之间的时长。</p></dd> <dt><a href="#TimeSpan">TimeSpan</a></dt> <dd><p>时间区间，时间区间是由两个时间点构成的一段时间。
时间区间（TimeSpan）与时间段（Duration）的区别是
时间区间具有方向性（begin --&gt; end），时间段没有方向性。</p></dd> <dt><a href="#TimePoint">TimePoint</a></dt> <dd><p>时间点。表示时钟上一个特定的瞬间时间点。</p></dd></dl> <h2 id="members"><a href="#members" class="header-anchor">#</a> Members</h2> <dl><dt><a href="#hopByHopHeaders">hopByHopHeaders</a></dt> <dd><p>13.5.1 End-to-end and Hop-by-hop Headers</p> <p>Hop-by-hop headers must be removed by the proxy before passing it on to the
next endpoint. Per-request basis hop-by-hop headers MUST be listed in a
Connection header, (section 14.10) to be introduced into HTTP/1.1 (or later).</p></dd></dl> <dl><dt><a href="#rules">rules</a></dt> <dd><p>数据格式校验规则，其中包含两类：</p> <ul><li>正则表达式</li> <li>接口：{test: (val)=&gt;boolean}</li></ul></dd> <dt><a href="#MS_PER_SECOND">MS_PER_SECOND</a></dt> <dd><p>常量：每秒钟的毫秒数</p></dd> <dt><a href="#MS_PER_MINUTE">MS_PER_MINUTE</a></dt> <dd><p>常量：每分钟的毫秒数</p></dd> <dt><a href="#MS_PER_HOUR">MS_PER_HOUR</a></dt> <dd><p>常量：每小时的毫秒数</p></dd> <dt><a href="#MS_PER_DAY">MS_PER_DAY</a></dt> <dd><p>常量：每天的毫秒数</p></dd> <dt><a href="#MS_PER_WEEK">MS_PER_WEEK</a></dt> <dd><p>常量：每周的毫秒数</p></dd></dl> <h2 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h2> <dl><dt><a href="#isHttps">isHttps()</a></dt> <dd><p>判断url是否是https</p></dd> <dt><a href="#combineUrlAndParams">combineUrlAndParams()</a></dt> <dd><p>将data对象的数据以key=value的方式合并到url之后，并返回合并之后的url。</p></dd> <dt><a href="#sign">sign(data, secret)</a> ⇒ <code>string</code></dt> <dd><p>对http请求数据签名，内部采用MD5算法生成签名指纹。</p></dd> <dt><a href="#getRequestOptions">getRequestOptions()</a></dt> <dd><p>将url解析成通用的请求选项参数。</p></dd> <dt><a href="#request">request()</a></dt> <dd><p>发起一次HTTP请求</p></dd> <dt><a href="#get">get()</a></dt> <dd><p>发起一次HTTP的GET请求。</p></dd> <dt><a href="#post">post()</a></dt> <dd><p>发起一次HTTP的POST请求。</p></dd> <dt><a href="#call">call()</a></dt> <dd><p>调用一次HTTP接口。HTTP接口统一采用POST方式进行通讯。</p></dd> <dt><a href="#makeRPC">makeRPC()</a></dt> <dd><p>定义一组以base地址开头的接口列表，返回接口对象。接口对象会被转换成驼峰命名。</p></dd> <dt><a href="#rpc">rpc()</a></dt> <dd><p>定义一组以base地址开头的接口列表，返回接口对象。接口对象会被转换成驼峰命名。</p></dd> <dt><a href="#setup">setup(proxyServer, proxyOptions)</a></dt> <dd><p>Sets up an <code>http.Server</code> or <code>https.Server</code> instance with the necessary
&quot;request&quot; and &quot;connect&quot; event listeners in order to make the server act as an
HTTP proxy.</p></dd> <dt><a href="#eachHeader">eachHeader()</a></dt> <dd><p>Iterator function for the request/response's &quot;headers&quot;.
Invokes <code>fn</code> for &quot;each&quot; header entry in the request.</p></dd> <dt><a href="#onrequest">onrequest()</a></dt> <dd><p>HTTP GET/POST/DELETE/PUT, etc. proxy requests.</p></dd> <dt><a href="#onconnect">onconnect()</a></dt> <dd><p>HTTP CONNECT proxy requests.</p></dd> <dt><a href="#authenticate">authenticate(server, req, fn)</a></dt> <dd><p>Checks <code>Proxy-Authorization</code> request headers. Same logic applied to CONNECT
requests as well as regular HTTP requests.</p></dd> <dt><a href="#requestAuthorization">requestAuthorization()</a></dt> <dd><p>Sends a &quot;407 Proxy Authentication Required&quot; HTTP response to the <code>socket</code>.</p></dd> <dt><a href="#webapp">webapp()</a></dt> <dd><p>创建一个基于koa2的web应用。</p></dd> <dt><a href="#body">body()</a></dt> <dd><p>创建一个body解析器中间件，详细选项设置请参考body模块。</p></dd> <dt><a href="#send">send()</a></dt> <dd><p>发送http响应</p></dd> <dt><a href="#sendFile">sendFile()</a></dt> <dd><p>发送响应文件。</p></dd> <dt><a href="#handler">handler()</a></dt> <dd><p>将func函数包装成一个中间件</p></dd></dl> <dl><dt><a href="#error">error(错误名称，推荐使用形如‘ERR_INVALID_ARGS’的命名规则，具体业务不做强制要求。, message)</a> ⇒ <code>Error</code></dt> <dd><p>构造一个新的错误对象，一般调用方式形如：throw error('ERR_NAME', 'message');</p></dd> <dt><a href="#checkError">checkError()</a></dt> <dd><p>检查错误，此函数会检查形如（err, ret）的错误。检查规则：</p> <ul><li>err是一个Error实例，返回true。</li> <li>ret.result !== 'ok', 返回true。</li></ul></dd> <dt><a href="#make">make()</a></dt> <dd><p>包装函数参数到一个通用操作封包对象，此函数可能的使用场景如下：</p> <pre><code>makeCOP(err);
makeCOP(ret);
makeCOP(null, ret);
</code></pre></dd> <dt><a href="#hash">hash(alg, data)</a> ⇒ <code>string</code></dt> <dd><p>用指定hash算法计算data的hash编码。</p></dd> <dt><a href="#md5">md5(data)</a> ⇒ <code>string</code></dt> <dd><p>计算data的md5值</p></dd> <dt><a href="#sha256">sha256(data)</a> ⇒ <code>string</code></dt> <dd><p>计算data的sha256值</p></dd> <dt><a href="#encode_aes_256_cbc">encode_aes_256_cbc(key, content)</a> ⇒ <code>string</code></dt> <dd><p>使用aes-256-cbc算法对数据进行编码</p></dd> <dt><a href="#decode_aes_256_cbc">decode_aes_256_cbc(key, content)</a> ⇒ <code>string</code></dt> <dd><p>对一串使用aes-256-cbc算法加密的密文进行解码</p></dd> <dt><a href="#encode_base64">encode_base64(content)</a> ⇒ <code>string</code></dt> <dd><p>对数据进行base64编码</p></dd> <dt><a href="#decode_base64">decode_base64(content)</a> ⇒ <code>string</code></dt> <dd><p>对base64编码的字符串进行解码</p></dd> <dt><a href="#encode_hex64">encode_hex64(content)</a> ⇒</dt> <dd><p>将一段十六进制的字符串进行base64编码</p></dd> <dt><a href="#decode_hex64">decode_hex64(content)</a> ⇒ <code>string</code></dt> <dd><p>对一段被base64编码过的十六进制字符串进行解码</p></dd> <dt><a href="#rs">rs(length, characters)</a> ⇒ <code>string</code></dt> <dd><p>获取一个随机字符串（random string）</p></dd> <dt><a href="#rsod">rsod(len)</a> ⇒ <code>string</code></dt> <dd><p>获取一个十进制的随机数字字符串（random string of digit）</p></dd> <dt><a href="#rsox">rsox(len)</a> ⇒ <code>string</code></dt> <dd><p>获取一个十六进制的随机数字字符串（random string of hex）</p></dd> <dt><a href="#rsoa">rsoa(len)</a> ⇒ <code>string</code></dt> <dd><p>获取一个随机字母字符串（random string of alpha）</p></dd> <dt><a href="#rsow">rsow(len)</a> ⇒ <code>string</code></dt> <dd><p>获取一个由数字、字母组成的随机字符串（random string of word）</p></dd> <dt><a href="#rsop">rsop(len)</a> ⇒ <code>string</code></dt> <dd><p>获取一个由可打印字符组成的随机字符串（random string of printable)</p></dd> <dt><a href="#create">create()</a> ⇒ <code><a href="#Flake">Flake</a></code></dt> <dd><p>创建一个flake对象</p></dd> <dt><a href="#has">has(obj, field)</a> ⇒ <code>boolean</code></dt> <dd><p>obj中是否存在field字段</p></dd> <dt><a href="#hasOne">hasOne(obj, fields)</a> ⇒ <code>boolean</code></dt> <dd><p>字段列表中的其中一个字段在obj中是否存在。</p></dd> <dt><a href="#hasAll">hasAll(obj, fields)</a> ⇒ <code>boolean</code></dt> <dd><p>字段列表中的字段在obj中是否全部存在。</p></dd> <dt><a href="#assertOne">assertOne(obj, fields)</a></dt> <dd><p>断言字段列表fields中的字段在对象obj中至少存在一个。如果断言失败，会抛出错误。</p></dd> <dt><a href="#assertAll">assertAll(obj, fields)</a></dt> <dd><p>断言字段列表fields中的全部字段在对象obj中都存在。断言失败会抛出错误。</p></dd> <dt><a href="#optional">optional(field, format, minlen, maxlen, defaultValue)</a> ⇒ <code>boolean</code></dt> <dd><p>可选项检查，如果字段存在就进行数据格式校验，如果字段不存在就返回默认值。</p></dd> <dt><a href="#required">required(field, format, minlen, maxlen)</a> ⇒ <code>boolean</code></dt> <dd><p>必备项检查，如果字段存在就进行数据格式校验，如果字段不存在就抛出错误。</p></dd> <dt><a href="#decompress">decompress()</a></dt> <dd><p>对http响应数据进行解压。如果http响应数据采用了gzip压缩，就进行解压，否则什么都不做。</p></dd> <dt><a href="#decode">decode()</a></dt> <dd><p>对http响应数据进行解码。如果http响应数据采用了特殊编码格式就进行解码，否则什么都不做。</p></dd> <dt><a href="#escape">escape()</a></dt> <dd><p>对HTML字符串中的特殊字符进行转义。</p></dd> <dt><a href="#init">init(scope)</a></dt> <dd><p>初始化日志模块</p></dd> <dt><a href="#init">init()</a></dt> <dd><p>初始化全局MySql对象</p></dd> <dt><a href="#connect">connect(transaction)</a> ⇒ <code><a href="#Connection">Connection</a></code></dt> <dd><p>连接数据库</p></dd> <dt><a href="#transaction">transaction()</a></dt> <dd><p>连接数据库并开启事务。</p></dd> <dt><a href="#query">query(sql, logsql)</a> ⇒ <code>any</code></dt> <dd><p>连接数据库，执行一次SQL查询，并自动释放连接。</p></dd> <dt><a href="#page">page(sql, page, size)</a> ⇒ <code>any</code></dt> <dd><p>连接数据库，执行一次分页查询，并自动释放连接。</p></dd> <dt><a href="#exec">exec()</a></dt> <dd><p>执行一条命令</p></dd> <dt><a href="#execSync">execSync()</a></dt> <dd><p>同步执行一调命令</p></dd> <dt><a href="#duration">duration(ms)</a> ⇒ <code><a href="#Duration">Duration</a></code></dt> <dd><p>创建一个时间段对象</p></dd> <dt><a href="#span">span(beginTimeStamp, endTimeStamp)</a> ⇒ <code><a href="#TimeSpan">TimeSpan</a></code></dt> <dd><p>创建一个时间区间对象。</p></dd> <dt><a href="#point">point(timestamp)</a> ⇒ <code><a href="#TimePoint">TimePoint</a></code></dt> <dd><p>创建一个时间点对象。</p></dd> <dt><a href="#now">now()</a></dt> <dd><p>获取现在时刻的时间点对象。</p></dd> <dt><a href="#utc">utc()</a></dt> <dd><p>获取dateTime结构所描述的UTC时间点。</p></dd> <dt><a href="#parse">parse()</a></dt> <dd><p>解析时间字符串，相当于Date.parse()。</p></dd> <dt><a href="#add">add(timePoint, duration)</a> ⇒ <code><a href="#TimePoint">TimePoint</a></code></dt> <dd><p>计算时间点timePoint加上时间段duration的时间点。</p></dd> <dt><a href="#sub">sub(timePoint, duration)</a> ⇒ <code><a href="#TimePoint">TimePoint</a></code></dt> <dd><p>计算时间点timePoint减去时间段duration的时间点。</p></dd> <dt><a href="#delay">delay(time)</a></dt> <dd><p>延迟，一般用法为:</p> <pre><code class="language-js">await delay(0.5) // 延迟0.5秒
</code></pre></dd> <dt><a href="#absolutePath">absolutePath()</a></dt> <dd><p>获取路径p的绝对路径</p> <ul><li>如果p以 '/' 开始，返回相对于当前进程cwd的绝对路径。</li></ul></dd> <dt><a href="#camelCase">camelCase()</a></dt> <dd><p>获取name的驼峰形式。如：</p> <pre><code>get_user_info =&gt; getUserInfo
_get_user_info =&gt; GetUserInfo
</code></pre></dd> <dt><a href="#camelCaseKeys">camelCaseKeys()</a></dt> <dd><p>将对象obj的key全部变成驼峰形式。</p></dd> <dt><a href="#compareVersion">compareVersion(versionA, versionB)</a> ⇒ <code>number</code></dt> <dd><p>对两个版本进行比较</p> <ul><li>versionA === versionB：返回 0</li> <li>versionA &lt; versionB： 返回 -1</li> <li>versionA &gt; versionB： 返回 1</li></ul></dd> <dt><a href="#computeGeoDistance">computeGeoDistance()</a></dt> <dd><p>计算地球球面上两个经纬点之间的地理距离。</p></dd></dl> <p><a name="Token"></a></p> <h2 id="token"><a href="#token" class="header-anchor">#</a> Token</h2> <p>Token,这是一个简易的对称加密token工具类。用于实现用户身份的鉴别。
一个典型的token表现为一段被加密的字符串，加密串内含用于身份鉴别和
安全校验的信息。</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Token">Token</a> <ul><li><a href="#new_Token_new">new Token(secret, timeout)</a></li> <li><a href="#Token+sign">.sign()</a></li> <li><a href="#Token+make">.make(data)</a> ⇒ <code>string</code></li> <li><a href="#Token+check">.check(token)</a> ⇒ <code>TokenSession</code></li></ul></li></ul> <p><a name="new_Token_new"></a></p> <h3 id="new-token-secret-timeout"><a href="#new-token-secret-timeout" class="header-anchor">#</a> new Token(secret, timeout)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>secret</td> <td><code>string</code></td> <td>用于加密的密钥</td></tr> <tr><td>timeout</td> <td><code>number</code></td> <td>token的过期时长，单位为秒。</td></tr></tbody></table> <p><a name="Token+sign"></a></p> <h3 id="token-sign"><a href="#token-sign" class="header-anchor">#</a> token.sign()</h3> <p>对数据进行签名</p> <p><strong>Kind</strong>: instance method of <a href="#Token"><code>Token</code></a><br> <a name="Token+make"></a></p> <h3 id="token-make-data-⇒-string"><a href="#token-make-data-⇒-string" class="header-anchor">#</a> token.make(data) ⇒ <code>string</code></h3> <p>生成token字符串</p> <p><strong>Kind</strong>: instance method of <a href="#Token"><code>Token</code></a><br> <strong>Returns</strong>: <code>string</code> - token密文字符串，可以传递给客户端。</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>data</td> <td><code>any</code></td> <td>暂存在token中的数据，尽量简短。</td></tr></tbody></table> <p><a name="Token+check"></a></p> <h3 id="token-check-token-⇒-tokensession"><a href="#token-check-token-⇒-tokensession" class="header-anchor">#</a> token.check(token) ⇒ <code>TokenSession</code></h3> <p>解密并验证token。如果验证成功，返回token中保存的数据。
如果验证失败，则返回undefined。</p> <p><strong>Kind</strong>: instance method of <a href="#Token"><code>Token</code></a><br> <strong>Returns</strong>: <code>TokenSession</code> - token的sessio信息</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>token</td> <td><code>string</code></td> <td>待验证的token字符串</td></tr></tbody></table> <p><a name="Code"></a></p> <h2 id="code"><a href="#code" class="header-anchor">#</a> Code</h2> <p>验证码</p> <ul><li>此类用于创建验证码对象。验证码对象可识别用户操作是否属于本人。</li> <li>验证码是一串有限长度（通常是4-8个）的数字字符串。验证码生成后可发到用户信任的手机或邮箱。</li> <li>验证码都有时效性，超时后验证码将会失效，失效的验证码将不会通过检查。</li> <li>此类只用于生成验证码字符串或检查验证码字符串的合法性。如果期望发送手机短信或邮件需要专门
的模块（sms或smtp）进行。</li></ul> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Code">Code</a> <ul><li><a href="#new_Code_new">new Code(length, timeout)</a></li> <li><a href="#Code+make">.make(type, to)</a> ⇒ <code>string</code></li> <li><a href="#Code+check">.check(type, to)</a> ⇒ <code>CodeSession</code></li> <li><a href="#Code+clear">.clear()</a></li></ul></li></ul> <p><a name="new_Code_new"></a></p> <h3 id="new-code-length-timeout"><a href="#new-code-length-timeout" class="header-anchor">#</a> new Code(length, timeout)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>length</td> <td><code>number</code></td> <td>验证码的长度，一般为4-8.</td></tr> <tr><td>timeout</td> <td><code>number</code></td> <td>验证码的有效期，单位为秒。</td></tr></tbody></table> <p><a name="Code+make"></a></p> <h3 id="code-make-type-to-⇒-string"><a href="#code-make-type-to-⇒-string" class="header-anchor">#</a> code.make(type, to) ⇒ <code>string</code></h3> <p>生成验证码</p> <p><strong>Kind</strong>: instance method of <a href="#Code"><code>Code</code></a><br> <strong>Returns</strong>: <code>string</code> - 生成的验证码字符串。</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td><code>string</code></td> <td>验证码的发送类型，email</td></tr> <tr><td>to</td> <td><code>string</code></td> <td>发送目标，如果验证发的发送类型是email，这里是 对应的邮箱地址，如果验证码发送类型为sms，这里就是对应的手机号码。</td></tr></tbody></table> <p><a name="Code+check"></a></p> <h3 id="code-check-type-to-⇒-codesession"><a href="#code-check-type-to-⇒-codesession" class="header-anchor">#</a> code.check(type, to) ⇒ <code>CodeSession</code></h3> <p>检查验证码</p> <p><strong>Kind</strong>: instance method of <a href="#Code"><code>Code</code></a><br> <strong>Returns</strong>: <code>CodeSession</code> - 如果通过检查，返回此发送目标对应验证码的session信息。</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td><code>string</code></td> <td>验证码的发送类型，email</td></tr> <tr><td>to</td> <td><code>string</code></td> <td>发送目标，如果验证发的发送类型是email，这里是 对应的邮箱地址，如果验证码发送类型为sms，这里就是对应的手机号码。</td></tr></tbody></table> <p><a name="Code+clear"></a></p> <h3 id="code-clear"><a href="#code-clear" class="header-anchor">#</a> code.clear()</h3> <p>清空所有验证码，此操作会让暂存的待检查的验证码全部丢失，
后续基于这些验证码的检查操作都会失败。</p> <p><strong>Kind</strong>: instance method of <a href="#Code"><code>Code</code></a><br> <a name="Key"></a></p> <h2 id="key"><a href="#key" class="header-anchor">#</a> Key</h2> <p>验证键</p> <ul><li>验证键是一种特殊的验证码。它和普通验证码的区别是能保证唯一性。</li> <li>这种唯一性不是全局唯一，是在所有已经生成但未检查的编码中的唯一，
即如果现已经生成1000个编码都还未检查也未失效，新生成的验证键值能保证与
当前这1000个键值都不同。</li></ul> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Key">Key</a> <ul><li><a href="#new_Key_new">new Key(length, timeout)</a></li> <li><a href="#Key+make">.make(data)</a> ⇒ <code>string</code></li> <li><a href="#Key+check">.check(key)</a> ⇒ <code>KeySession</code></li> <li><a href="#Key+clear">.clear()</a></li></ul></li></ul> <p><a name="new_Key_new"></a></p> <h3 id="new-key-length-timeout"><a href="#new-key-length-timeout" class="header-anchor">#</a> new Key(length, timeout)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>length</td> <td><code>number</code></td> <td>长度，为了保证唯一，在特定的场景可以自行设定。</td></tr> <tr><td>timeout</td> <td><code>number</code></td> <td>有效时长，单位为秒。</td></tr></tbody></table> <p><a name="Key+make"></a></p> <h3 id="key-make-data-⇒-string"><a href="#key-make-data-⇒-string" class="header-anchor">#</a> key.make(data) ⇒ <code>string</code></h3> <p>生成键值</p> <p><strong>Kind</strong>: instance method of <a href="#Key"><code>Key</code></a><br> <strong>Returns</strong>: <code>string</code> - 键值字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>data</td> <td><code>any</code></td> <td>与键值绑定的信息。</td></tr></tbody></table> <p><a name="Key+check"></a></p> <h3 id="key-check-key-⇒-keysession"><a href="#key-check-key-⇒-keysession" class="header-anchor">#</a> key.check(key) ⇒ <code>KeySession</code></h3> <p>检查键值</p> <p><strong>Kind</strong>: instance method of <a href="#Key"><code>Key</code></a><br> <strong>Returns</strong>: <code>KeySession</code> - 与此键值的session数据，如果检查失败返回undefined。</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>string</code></td> <td>待检查的键值字符串</td></tr></tbody></table> <p><a name="Key+clear"></a></p> <h3 id="key-clear"><a href="#key-clear" class="header-anchor">#</a> key.clear()</h3> <p>清空所有键值，此操作会让所有已经生成但未检查的键值全部丢失，
后续针对这些键值的检查操作都会失败。</p> <p><strong>Kind</strong>: instance method of <a href="#Key"><code>Key</code></a><br> <a name="Flake"></a></p> <h2 id="flake"><a href="#flake" class="header-anchor">#</a> Flake</h2> <p>雪花算法唯一编码生成器</p> <ul><li>此类采用flake算法生成唯一编码。</li> <li>此类能同时支持156个节点，每个节点每毫秒生成2^24个唯一编码。</li> <li>此类生成的唯一编码是一个由20个十六进制字符组成的串。</li></ul> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Flake">Flake</a> <ul><li><a href="#new_Flake_new">new Flake(nodeId)</a></li> <li><a href="#Flake+get">.get()</a></li></ul></li></ul> <p><a name="new_Flake_new"></a></p> <h3 id="new-flake-nodeid"><a href="#new-flake-nodeid" class="header-anchor">#</a> new Flake(nodeId)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>nodeId</td> <td><code>number</code></td> <td>节点ID，0-255.</td></tr></tbody></table> <p><a name="Flake+get"></a></p> <h3 id="flake-get"><a href="#flake-get" class="header-anchor">#</a> flake.get()</h3> <p>获取编号</p> <p><strong>Kind</strong>: instance method of <a href="#Flake"><code>Flake</code></a><br> <a name="Connection"></a></p> <h2 id="connection"><a href="#connection" class="header-anchor">#</a> Connection</h2> <p>数据库链接对象</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Connection">Connection</a> <ul><li><a href="#Connection+query">.query(sql, logsql)</a> ⇒ <code>any</code></li> <li><a href="#Connection+page">.page(sql, page, size)</a> ⇒ <code>any</code></li> <li><a href="#Connection+transaction">.transaction()</a></li> <li><a href="#Connection+commit">.commit()</a></li> <li><a href="#Connection+rollback">.rollback()</a></li> <li><a href="#Connection+release">.release()</a></li></ul></li></ul> <p><a name="Connection+query"></a></p> <h3 id="connection-query-sql-logsql-⇒-any"><a href="#connection-query-sql-logsql-⇒-any" class="header-anchor">#</a> connection.query(sql, logsql) ⇒ <code>any</code></h3> <p>执行一次sql查询</p> <p><strong>Kind</strong>: instance method of <a href="#Connection"><code>Connection</code></a><br> <strong>Returns</strong>: <code>any</code> - 查询结果集</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>sql</td> <td><code>string</code></td> <td></td> <td>SQL语句</td></tr> <tr><td>logsql</td> <td><code>boolean</code></td> <td><code>true</code></td> <td>是否打印SQL语句</td></tr></tbody></table> <p><a name="Connection+page"></a></p> <h3 id="connection-page-sql-page-size-⇒-any"><a href="#connection-page-sql-page-size-⇒-any" class="header-anchor">#</a> connection.page(sql, page, size) ⇒ <code>any</code></h3> <p>执行一次分页查询</p> <p><strong>Kind</strong>: instance method of <a href="#Connection"><code>Connection</code></a><br> <strong>Returns</strong>: <code>any</code> - 查询结果集</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>sql</td> <td><code>string</code></td> <td>SQL语句</td></tr> <tr><td>page</td> <td><code>number</code></td> <td>当前页码，从1开始。</td></tr> <tr><td>size</td> <td><code>number</code></td> <td>每页的数据条数</td></tr></tbody></table> <p><a name="Connection+transaction"></a></p> <h3 id="connection-transaction"><a href="#connection-transaction" class="header-anchor">#</a> connection.transaction()</h3> <p>开启事务</p> <p><strong>Kind</strong>: instance method of <a href="#Connection"><code>Connection</code></a><br> <a name="Connection+commit"></a></p> <h3 id="connection-commit"><a href="#connection-commit" class="header-anchor">#</a> connection.commit()</h3> <p>提交事务</p> <p><strong>Kind</strong>: instance method of <a href="#Connection"><code>Connection</code></a><br> <a name="Connection+rollback"></a></p> <h3 id="connection-rollback"><a href="#connection-rollback" class="header-anchor">#</a> connection.rollback()</h3> <p>回滚事务</p> <p><strong>Kind</strong>: instance method of <a href="#Connection"><code>Connection</code></a><br> <a name="Connection+release"></a></p> <h3 id="connection-release"><a href="#connection-release" class="header-anchor">#</a> connection.release()</h3> <p>释放连接</p> <p><strong>Kind</strong>: instance method of <a href="#Connection"><code>Connection</code></a><br> <a name="MySql"></a></p> <h2 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySql</h2> <p>mysql数据库访问对象</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#MySql">MySql</a> <ul><li><a href="#MySql+init">.init()</a></li> <li><a href="#MySql+connect">.connect(transaction)</a> ⇒ <a href="#Connection"><code>Connection</code></a></li> <li><a href="#MySql+transaction">.transaction()</a></li> <li><a href="#MySql+query">.query(sql, logsql)</a> ⇒ <code>any</code></li> <li><a href="#MySql+page">.page(sql, page, size)</a> ⇒ <code>any</code></li></ul></li></ul> <p><a name="MySql+init"></a></p> <h3 id="mysql-init"><a href="#mysql-init" class="header-anchor">#</a> mySql.init()</h3> <p>构造器</p> <p><strong>Kind</strong>: instance method of <a href="#MySql"><code>MySql</code></a><br> <a name="MySql+connect"></a></p> <h3 id="mysql-connect-transaction-⇒-connection"><a href="#mysql-connect-transaction-⇒-connection" class="header-anchor">#</a> mySql.connect(transaction) ⇒ <a href="#Connection"><code>Connection</code></a></h3> <p>连接数据库</p> <p><strong>Kind</strong>: instance method of <a href="#MySql"><code>MySql</code></a><br> <strong>Returns</strong>: <a href="#Connection"><code>Connection</code></a> - 数据库连接对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>transaction</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>开启事务</td></tr></tbody></table> <p><a name="MySql+transaction"></a></p> <h3 id="mysql-transaction"><a href="#mysql-transaction" class="header-anchor">#</a> mySql.transaction()</h3> <p>连接数据库并开启事务。</p> <p><strong>Kind</strong>: instance method of <a href="#MySql"><code>MySql</code></a><br> <a name="MySql+query"></a></p> <h3 id="mysql-query-sql-logsql-⇒-any"><a href="#mysql-query-sql-logsql-⇒-any" class="header-anchor">#</a> mySql.query(sql, logsql) ⇒ <code>any</code></h3> <p>连接数据库，执行一次SQL查询，并自动释放连接。</p> <p><strong>Kind</strong>: instance method of <a href="#MySql"><code>MySql</code></a><br> <strong>Returns</strong>: <code>any</code> - 查询结果集</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>sql</td> <td><code>string</code></td> <td></td> <td>SQL语句</td></tr> <tr><td>logsql</td> <td><code>boolean</code></td> <td><code>true</code></td> <td>是否打印SQL语句</td></tr></tbody></table> <p><a name="MySql+page"></a></p> <h3 id="mysql-page-sql-page-size-⇒-any"><a href="#mysql-page-sql-page-size-⇒-any" class="header-anchor">#</a> mySql.page(sql, page, size) ⇒ <code>any</code></h3> <p>连接数据库，执行一次分页查询，并自动释放连接。</p> <p><strong>Kind</strong>: instance method of <a href="#MySql"><code>MySql</code></a><br> <strong>Returns</strong>: <code>any</code> - 查询结果集</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>sql</td> <td><code>string</code></td> <td>SQL语句</td></tr> <tr><td>page</td> <td><code>number</code></td> <td>当前页码，从1开始。</td></tr> <tr><td>size</td> <td><code>number</code></td> <td>每页的数据条数</td></tr></tbody></table> <p><a name="Schedule"></a></p> <h2 id="schedule"><a href="#schedule" class="header-anchor">#</a> Schedule</h2> <p>日程</p> <ul><li>日程是为了解决在特定的时刻执行任务的需求，例如：每周星期二上午九点执行任务A。</li> <li>日程不是解决每隔单位时间执行任务的需求，如：每隔30秒执行任务B，你可以用计时器
setInterval之类的方法完成这类需求。</li></ul> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Schedule">Schedule</a> <ul><li><a href="#new_Schedule_new">new Schedule(schedule, precision)</a></li> <li><a href="#Schedule+running">.running</a></li> <li><a href="#Schedule+start">.start(task)</a> ⇒ <code>boolean</code></li> <li><a href="#Schedule+stop">.stop()</a></li></ul></li></ul> <p><a name="new_Schedule_new"></a></p> <h3 id="new-schedule-schedule-precision"><a href="#new-schedule-schedule-precision" class="header-anchor">#</a> new Schedule(schedule, precision)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>schedule</td> <td><code>ScheduleOptions</code></td> <td>日程规则选项</td></tr> <tr><td>precision</td> <td><code>number</code></td> <td>日程检测精度，单位为毫秒。</td></tr></tbody></table> <p><a name="Schedule+running"></a></p> <h3 id="schedule-running"><a href="#schedule-running" class="header-anchor">#</a> schedule.running</h3> <p>获取日程是否在运行</p> <p><strong>Kind</strong>: instance property of <a href="#Schedule"><code>Schedule</code></a><br> <a name="Schedule+start"></a></p> <h3 id="schedule-start-task-⇒-boolean"><a href="#schedule-start-task-⇒-boolean" class="header-anchor">#</a> schedule.start(task) ⇒ <code>boolean</code></h3> <p>启动日程</p> <p><strong>Kind</strong>: instance method of <a href="#Schedule"><code>Schedule</code></a><br> <strong>Returns</strong>: <code>boolean</code> - 日程是否启动成功</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>task</td> <td><code>Date</code></td> <td>日程触发时的任务函数 (Date)=&gt;void</td></tr></tbody></table> <p><a name="Schedule+stop"></a></p> <h3 id="schedule-stop"><a href="#schedule-stop" class="header-anchor">#</a> schedule.stop()</h3> <p>停止日程</p> <p><strong>Kind</strong>: instance method of <a href="#Schedule"><code>Schedule</code></a><br> <a name="Channel"></a></p> <h2 id="channel"><a href="#channel" class="header-anchor">#</a> Channel</h2> <p>邮件发送通道</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Channel">Channel</a> <ul><li><a href="#Channel+send">.send()</a></li> <li><a href="#Channel+sendQuickly">.sendQuickly()</a></li></ul></li></ul> <p><a name="Channel+send"></a></p> <h3 id="channel-send"><a href="#channel-send" class="header-anchor">#</a> channel.send()</h3> <p>发送邮件</p> <p><strong>Kind</strong>: instance method of <a href="#Channel"><code>Channel</code></a><br> <a name="Channel+sendQuickly"></a></p> <h3 id="channel-sendquickly"><a href="#channel-sendquickly" class="header-anchor">#</a> channel.sendQuickly()</h3> <p>发送邮件，参数比send更简洁。</p> <p><strong>Kind</strong>: instance method of <a href="#Channel"><code>Channel</code></a><br> <a name="Duration"></a></p> <h2 id="duration"><a href="#duration" class="header-anchor">#</a> Duration</h2> <p>时间段，代表两个时间点之间的时长。</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#Duration">Duration</a> <ul><li><a href="#new_Duration_new">new Duration(duration)</a></li> <li><a href="#Duration+value">.value</a></li> <li><a href="#Duration+accurateMilliseconds">.accurateMilliseconds</a></li> <li><a href="#Duration+accurateSeconds">.accurateSeconds</a></li> <li><a href="#Duration+accurateMinutes">.accurateMinutes</a></li> <li><a href="#Duration+accurateHours">.accurateHours</a></li> <li><a href="#Duration+accurateDays">.accurateDays</a></li> <li><a href="#Duration+accurateMonths">.accurateMonths</a></li> <li><a href="#Duration+accurateYears">.accurateYears</a></li> <li><a href="#Duration+milliseconds">.milliseconds</a></li> <li><a href="#Duration+seconds">.seconds</a></li> <li><a href="#Duration+minutes">.minutes</a></li> <li><a href="#Duration+hours">.hours</a></li> <li><a href="#Duration+days">.days</a></li> <li><a href="#Duration+months">.months</a></li> <li><a href="#Duration+years">.years</a></li></ul></li></ul> <p><a name="new_Duration_new"></a></p> <h3 id="new-duration-duration"><a href="#new-duration-duration" class="header-anchor">#</a> new Duration(duration)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>duration</td> <td><code>number</code></td> <td>时长的毫秒数</td></tr></tbody></table> <p><a name="Duration+value"></a></p> <h3 id="duration-value"><a href="#duration-value" class="header-anchor">#</a> duration.value</h3> <p>获取毫秒数</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+accurateMilliseconds"></a></p> <h3 id="duration-accuratemilliseconds"><a href="#duration-accuratemilliseconds" class="header-anchor">#</a> duration.accurateMilliseconds</h3> <p>获取精确的毫秒数，如：500.0毫秒。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+accurateSeconds"></a></p> <h3 id="duration-accurateseconds"><a href="#duration-accurateseconds" class="header-anchor">#</a> duration.accurateSeconds</h3> <p>获取精确的秒数，如：0.56秒。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+accurateMinutes"></a></p> <h3 id="duration-accurateminutes"><a href="#duration-accurateminutes" class="header-anchor">#</a> duration.accurateMinutes</h3> <p>获取精确的分钟数，如：0.54分钟。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+accurateHours"></a></p> <h3 id="duration-accuratehours"><a href="#duration-accuratehours" class="header-anchor">#</a> duration.accurateHours</h3> <p>获取精确的小时数，如：0.547小时.</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+accurateDays"></a></p> <h3 id="duration-accuratedays"><a href="#duration-accuratedays" class="header-anchor">#</a> duration.accurateDays</h3> <p>获取精确的天数，如：0.32天。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+accurateMonths"></a></p> <h3 id="duration-accuratemonths"><a href="#duration-accuratemonths" class="header-anchor">#</a> duration.accurateMonths</h3> <p>获取精确的月数（每月假设都是30天），如：0.6个月。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+accurateYears"></a></p> <h3 id="duration-accurateyears"><a href="#duration-accurateyears" class="header-anchor">#</a> duration.accurateYears</h3> <p>获取精确的年数（每年假设是365.25天），如：1.7年。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+milliseconds"></a></p> <h3 id="duration-milliseconds"><a href="#duration-milliseconds" class="header-anchor">#</a> duration.milliseconds</h3> <p>获取毫秒数，省略精确值的小数部分。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+seconds"></a></p> <h3 id="duration-seconds"><a href="#duration-seconds" class="header-anchor">#</a> duration.seconds</h3> <p>获取秒数，省略精确值的小数部分。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+minutes"></a></p> <h3 id="duration-minutes"><a href="#duration-minutes" class="header-anchor">#</a> duration.minutes</h3> <p>获取分钟数，省略精确值的小数部分。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+hours"></a></p> <h3 id="duration-hours"><a href="#duration-hours" class="header-anchor">#</a> duration.hours</h3> <p>获取小时数，省略精确值的小数部分。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+days"></a></p> <h3 id="duration-days"><a href="#duration-days" class="header-anchor">#</a> duration.days</h3> <p>获取天数，省略精确值的小数部分。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+months"></a></p> <h3 id="duration-months"><a href="#duration-months" class="header-anchor">#</a> duration.months</h3> <p>获取月数，省略精确值的小数部分。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="Duration+years"></a></p> <h3 id="duration-years"><a href="#duration-years" class="header-anchor">#</a> duration.years</h3> <p>获取年数，省略精确值的小数部分。</p> <p><strong>Kind</strong>: instance property of <a href="#Duration"><code>Duration</code></a><br> <a name="TimeSpan"></a></p> <h2 id="timespan"><a href="#timespan" class="header-anchor">#</a> TimeSpan</h2> <p>时间区间，时间区间是由两个时间点构成的一段时间。
时间区间（TimeSpan）与时间段（Duration）的区别是
时间区间具有方向性（begin --&gt; end），时间段没有方向性。</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#TimeSpan">TimeSpan</a> <ul><li><a href="#new_TimeSpan_new">new TimeSpan(begin, end)</a></li> <li><a href="#TimeSpan+begin">.begin</a></li> <li><a href="#TimeSpan+end">.end</a></li> <li><a href="#TimeSpan+duration">.duration</a></li> <li><a href="#TimeSpan+include">.include(timePoint)</a> ⇒ <code>boolean</code></li> <li><a href="#TimeSpan+expand">.expand()</a> ⇒ <a href="#TimePoint"><code>TimePoint</code></a> | <a href="#TimeSpan"><code>TimeSpan</code></a></li></ul></li></ul> <p><a name="new_TimeSpan_new"></a></p> <h3 id="new-timespan-begin-end"><a href="#new-timespan-begin-end" class="header-anchor">#</a> new TimeSpan(begin, end)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>begin</td> <td><code>number</code></td> <td>开始的时间戳</td></tr> <tr><td>end</td> <td><code>number</code></td> <td>结束时间戳</td></tr></tbody></table> <p><a name="TimeSpan+begin"></a></p> <h3 id="timespan-begin"><a href="#timespan-begin" class="header-anchor">#</a> timeSpan.begin</h3> <p>获取开始时间戳</p> <p><strong>Kind</strong>: instance property of <a href="#TimeSpan"><code>TimeSpan</code></a><br> <a name="TimeSpan+end"></a></p> <h3 id="timespan-end"><a href="#timespan-end" class="header-anchor">#</a> timeSpan.end</h3> <p>获取结束时间戳</p> <p><strong>Kind</strong>: instance property of <a href="#TimeSpan"><code>TimeSpan</code></a><br> <a name="TimeSpan+duration"></a></p> <h3 id="timespan-duration"><a href="#timespan-duration" class="header-anchor">#</a> timeSpan.duration</h3> <p>获取时间段</p> <p><strong>Kind</strong>: instance property of <a href="#TimeSpan"><code>TimeSpan</code></a><br> <a name="TimeSpan+include"></a></p> <h3 id="timespan-include-timepoint-⇒-boolean"><a href="#timespan-include-timepoint-⇒-boolean" class="header-anchor">#</a> timeSpan.include(timePoint) ⇒ <code>boolean</code></h3> <p>检测此时间区间是否包含时间点timePoint。</p> <p><strong>Kind</strong>: instance method of <a href="#TimeSpan"><code>TimeSpan</code></a><br> <strong>Returns</strong>: <code>boolean</code> - timePoint是否在此时间区间内</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>timePoint</td> <td><code>timePoint</code></td> <td>时间点</td></tr></tbody></table> <p><a name="TimeSpan+expand"></a></p> <h3 id="timespan-expand-⇒-timepoint-timespan"><a href="#timespan-expand-⇒-timepoint-timespan" class="header-anchor">#</a> timeSpan.expand() ⇒ <a href="#TimePoint"><code>TimePoint</code></a> | <a href="#TimeSpan"><code>TimeSpan</code></a></h3> <p>将此时间区间扩展到指定的时间点timePoint处。</p> <p><strong>Kind</strong>: instance method of <a href="#TimeSpan"><code>TimeSpan</code></a><br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 目标时间点<a href="#TimeSpan"><code>TimeSpan</code></a> - 扩展后的此时间区间对象<br> <a name="TimePoint"></a></p> <h2 id="timepoint"><a href="#timepoint" class="header-anchor">#</a> TimePoint</h2> <p>时间点。表示时钟上一个特定的瞬间时间点。</p> <p><strong>Kind</strong>: global class</p> <ul><li><a href="#TimePoint">TimePoint</a> <ul><li><a href="#new_TimePoint_new">new TimePoint(timestamp)</a></li> <li><em>instance</em> <ul><li><a href="#TimePoint+value">.value</a></li> <li><a href="#TimePoint+dateTime">.dateTime</a></li> <li><a href="#TimePoint+thisSecond">.thisSecond</a></li> <li><a href="#TimePoint+thisMinute">.thisMinute</a></li> <li><a href="#TimePoint+thisHour">.thisHour</a></li> <li><a href="#TimePoint+thisDay">.thisDay</a></li> <li><a href="#TimePoint+thisWeek">.thisWeek</a></li> <li><a href="#TimePoint+thisMonth">.thisMonth</a></li> <li><a href="#TimePoint+thisYear">.thisYear</a></li> <li><a href="#TimePoint+toString">.toString()</a></li> <li><a href="#TimePoint+add">.add(duration)</a> ⇒ <a href="#TimePoint"><code>TimePoint</code></a></li> <li><a href="#TimePoint+sub">.sub(duration)</a> ⇒ <a href="#TimePoint"><code>TimePoint</code></a></li> <li><a href="#TimePoint+from">.from(timePoint)</a> ⇒ <a href="#TimePoint"><code>TimePoint</code></a></li> <li><a href="#TimePoint+to">.to(timePoint)</a> ⇒ <a href="#TimePoint"><code>TimePoint</code></a></li></ul></li> <li><em>static</em> <ul><li><a href="#TimePoint.now">.now()</a></li> <li><a href="#TimePoint.utc">.utc()</a></li> <li><a href="#TimePoint.parse">.parse()</a></li></ul></li></ul></li></ul> <p><a name="new_TimePoint_new"></a></p> <h3 id="new-timepoint-timestamp"><a href="#new-timepoint-timestamp" class="header-anchor">#</a> new TimePoint(timestamp)</h3> <p>构造器</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>timestamp</td> <td><code>number</code></td> <td>时间戳，默认为创建此对象时的时间戳。</td></tr></tbody></table> <p><a name="TimePoint+value"></a></p> <h3 id="timepoint-value"><a href="#timepoint-value" class="header-anchor">#</a> timePoint.value</h3> <p>获取时间戳数值</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+dateTime"></a></p> <h3 id="timepoint-datetime"><a href="#timepoint-datetime" class="header-anchor">#</a> timePoint.dateTime</h3> <p>获取日期时间结构</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+thisSecond"></a></p> <h3 id="timepoint-thissecond"><a href="#timepoint-thissecond" class="header-anchor">#</a> timePoint.thisSecond</h3> <p>获取当前时间点所在的秒区间。</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+thisMinute"></a></p> <h3 id="timepoint-thisminute"><a href="#timepoint-thisminute" class="header-anchor">#</a> timePoint.thisMinute</h3> <p>获取当前时间点所在的分钟区间。</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+thisHour"></a></p> <h3 id="timepoint-thishour"><a href="#timepoint-thishour" class="header-anchor">#</a> timePoint.thisHour</h3> <p>获取当前时间点所在的小时区间。</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+thisDay"></a></p> <h3 id="timepoint-thisday"><a href="#timepoint-thisday" class="header-anchor">#</a> timePoint.thisDay</h3> <p>获取当前时间点所在的日期区间。</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+thisWeek"></a></p> <h3 id="timepoint-thisweek"><a href="#timepoint-thisweek" class="header-anchor">#</a> timePoint.thisWeek</h3> <p>获取当前时间点所在的周时间区间。</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+thisMonth"></a></p> <h3 id="timepoint-thismonth"><a href="#timepoint-thismonth" class="header-anchor">#</a> timePoint.thisMonth</h3> <p>获取当前所在时间点的月时间区间。</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+thisYear"></a></p> <h3 id="timepoint-thisyear"><a href="#timepoint-thisyear" class="header-anchor">#</a> timePoint.thisYear</h3> <p>获取当前时间点所在的年时间区间。</p> <p><strong>Kind</strong>: instance property of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+toString"></a></p> <h3 id="timepoint-tostring"><a href="#timepoint-tostring" class="header-anchor">#</a> timePoint.toString()</h3> <p>转换成格式化字符串。格式字符串语法：</p> <div class="language- extra-class"><pre class="language-text"><code>month/year =&gt; 03/2010
hour:minute:second =&gt; 08:45:59

完整语法如下：
year: 年份
month: 月份
date: 日期
hour: 小时
minute: 分钟
second: 秒
ms: 毫秒
</code></pre></div><p><strong>Kind</strong>: instance method of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint+add"></a></p> <h3 id="timepoint-add-duration-⇒-timepoint"><a href="#timepoint-add-duration-⇒-timepoint" class="header-anchor">#</a> timePoint.add(duration) ⇒ <a href="#TimePoint"><code>TimePoint</code></a></h3> <p>加法，计算此时间点加上一段时间的时间点。</p> <p><strong>Kind</strong>: instance method of <a href="#TimePoint"><code>TimePoint</code></a><br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 结果时间点</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>duration</td> <td><a href="#Duration"><code>Duration</code></a></td> <td>时间段</td></tr></tbody></table> <p><a name="TimePoint+sub"></a></p> <h3 id="timepoint-sub-duration-⇒-timepoint"><a href="#timepoint-sub-duration-⇒-timepoint" class="header-anchor">#</a> timePoint.sub(duration) ⇒ <a href="#TimePoint"><code>TimePoint</code></a></h3> <p>减法，计算此时间点减去一段时间的时间点。</p> <p><strong>Kind</strong>: instance method of <a href="#TimePoint"><code>TimePoint</code></a><br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 结果时间点</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>duration</td> <td><a href="#Duration"><code>Duration</code></a></td> <td>时间段</td></tr></tbody></table> <p><a name="TimePoint+from"></a></p> <h3 id="timepoint-from-timepoint-⇒-timepoint"><a href="#timepoint-from-timepoint-⇒-timepoint" class="header-anchor">#</a> timePoint.from(timePoint) ⇒ <a href="#TimePoint"><code>TimePoint</code></a></h3> <p>计算从某个特定时间点开始到当前时间点结束的的时间区间。</p> <p><strong>Kind</strong>: instance method of <a href="#TimePoint"><code>TimePoint</code></a><br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 时间区间</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>timePoint</td> <td><a href="#TimePoint"><code>TimePoint</code></a></td> <td>开始时间点</td></tr></tbody></table> <p><a name="TimePoint+to"></a></p> <h3 id="timepoint-to-timepoint-⇒-timepoint"><a href="#timepoint-to-timepoint-⇒-timepoint" class="header-anchor">#</a> timePoint.to(timePoint) ⇒ <a href="#TimePoint"><code>TimePoint</code></a></h3> <p>计算从当前时间点开始到某个特定时间点结束的的时间区间。</p> <p><strong>Kind</strong>: instance method of <a href="#TimePoint"><code>TimePoint</code></a><br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 时间区间</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>timePoint</td> <td><a href="#TimePoint"><code>TimePoint</code></a></td> <td>结束时间点</td></tr></tbody></table> <p><a name="TimePoint.now"></a></p> <h3 id="timepoint-now"><a href="#timepoint-now" class="header-anchor">#</a> TimePoint.now()</h3> <p>获取当前时刻的时间点。</p> <p><strong>Kind</strong>: static method of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint.utc"></a></p> <h3 id="timepoint-utc"><a href="#timepoint-utc" class="header-anchor">#</a> TimePoint.utc()</h3> <p>获取dateTime结构所描述的UTC时间点。</p> <p><strong>Kind</strong>: static method of <a href="#TimePoint"><code>TimePoint</code></a><br> <a name="TimePoint.parse"></a></p> <h3 id="timepoint-parse"><a href="#timepoint-parse" class="header-anchor">#</a> TimePoint.parse()</h3> <p>解析时间字符串，相当于Date.parse()。</p> <p><strong>Kind</strong>: static method of <a href="#TimePoint"><code>TimePoint</code></a></p> <p><a name="WebApp"></a></p> <h2 id="webapp"><a href="#webapp" class="header-anchor">#</a> WebApp</h2> <p>WebApp</p> <ul><li>Web服务端应用，从Koa继承而来。</li></ul> <p><strong>Kind</strong>: global class<br> <a name="hopByHopHeaders"></a></p> <h2 id="hopbyhopheaders"><a href="#hopbyhopheaders" class="header-anchor">#</a> hopByHopHeaders</h2> <p>13.5.1 End-to-end and Hop-by-hop Headers</p> <p>Hop-by-hop headers must be removed by the proxy before passing it on to the
next endpoint. Per-request basis hop-by-hop headers MUST be listed in a
Connection header, (section 14.10) to be introduced into HTTP/1.1 (or later).</p> <p><strong>Kind</strong>: global variable<br> <a name="isHttps"></a></p> <h2 id="ishttps"><a href="#ishttps" class="header-anchor">#</a> isHttps()</h2> <p>判断url是否是https</p> <p><strong>Kind</strong>: global function<br> <a name="combineUrlAndParams"></a></p> <h2 id="combineurlandparams"><a href="#combineurlandparams" class="header-anchor">#</a> combineUrlAndParams()</h2> <p>将data对象的数据以key=value的方式合并到url之后，并返回合并之后的url。</p> <p><strong>Kind</strong>: global function<br> <a name="sign"></a></p> <h2 id="sign-data-secret-⇒-string"><a href="#sign-data-secret-⇒-string" class="header-anchor">#</a> sign(data, secret) ⇒ <code>string</code></h2> <p>对http请求数据签名，内部采用MD5算法生成签名指纹。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 签名指纹</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>data</td> <td><code>object</code></td> <td>用于签名的http请求数据。</td></tr> <tr><td>secret</td> <td><code>string</code></td> <td>用于签名的密钥。</td></tr></tbody></table> <p><a name="getRequestOptions"></a></p> <h2 id="getrequestoptions"><a href="#getrequestoptions" class="header-anchor">#</a> getRequestOptions()</h2> <p>将url解析成通用的请求选项参数。</p> <p><strong>Kind</strong>: global function<br> <a name="request"></a></p> <h2 id="request"><a href="#request" class="header-anchor">#</a> request()</h2> <p>发起一次HTTP请求</p> <p><strong>Kind</strong>: global function<br> <a name="get"></a></p> <h2 id="get"><a href="#get" class="header-anchor">#</a> get()</h2> <p>发起一次HTTP的GET请求。</p> <p><strong>Kind</strong>: global function<br> <a name="post"></a></p> <h2 id="post"><a href="#post" class="header-anchor">#</a> post()</h2> <p>发起一次HTTP的POST请求。</p> <p><strong>Kind</strong>: global function<br> <a name="call"></a></p> <h2 id="call"><a href="#call" class="header-anchor">#</a> call()</h2> <p>调用一次HTTP接口。HTTP接口统一采用POST方式进行通讯。</p> <p><strong>Kind</strong>: global function<br> <a name="makeRPC"></a></p> <h2 id="makerpc"><a href="#makerpc" class="header-anchor">#</a> makeRPC()</h2> <p>定义一组以base地址开头的接口列表，返回接口对象。接口对象会被转换成驼峰命名。</p> <p><strong>Kind</strong>: global function<br> <a name="rpc"></a></p> <h2 id="rpc"><a href="#rpc" class="header-anchor">#</a> rpc()</h2> <p>定义一组以base地址开头的接口列表，返回接口对象。接口对象会被转换成驼峰命名。</p> <p><strong>Kind</strong>: global function<br> <a name="setup"></a></p> <h2 id="setup-proxyserver-proxyoptions"><a href="#setup-proxyserver-proxyoptions" class="header-anchor">#</a> setup(proxyServer, proxyOptions)</h2> <p>Sets up an <code>http.Server</code> or <code>https.Server</code> instance with the necessary
&quot;request&quot; and &quot;connect&quot; event listeners in order to make the server act as an
HTTP proxy.</p> <p><strong>Kind</strong>: global function<br> <strong>Api</strong>: public</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>proxyServer</td> <td><code>http.Server</code> | <code>https.Server</code></td></tr> <tr><td>proxyOptions</td> <td><code>Object</code></td></tr></tbody></table> <p><a name="eachHeader"></a></p> <h2 id="eachheader"><a href="#eachheader" class="header-anchor">#</a> eachHeader()</h2> <p>Iterator function for the request/response's &quot;headers&quot;.
Invokes <code>fn</code> for &quot;each&quot; header entry in the request.</p> <p><strong>Kind</strong>: global function<br> <strong>Api</strong>: private<br> <a name="onrequest"></a></p> <h2 id="onrequest"><a href="#onrequest" class="header-anchor">#</a> onrequest()</h2> <p>HTTP GET/POST/DELETE/PUT, etc. proxy requests.</p> <p><strong>Kind</strong>: global function<br> <a name="onconnect"></a></p> <h2 id="onconnect"><a href="#onconnect" class="header-anchor">#</a> onconnect()</h2> <p>HTTP CONNECT proxy requests.</p> <p><strong>Kind</strong>: global function<br> <a name="authenticate"></a></p> <h2 id="authenticate-server-req-fn"><a href="#authenticate-server-req-fn" class="header-anchor">#</a> authenticate(server, req, fn)</h2> <p>Checks <code>Proxy-Authorization</code> request headers. Same logic applied to CONNECT
requests as well as regular HTTP requests.</p> <p><strong>Kind</strong>: global function<br> <strong>Api</strong>: private</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>server</td> <td><code>http.Server</code></td> <td></td></tr> <tr><td>req</td> <td><code>http.ServerRequest</code></td> <td></td></tr> <tr><td>fn</td> <td><code>function</code></td> <td>callback function</td></tr></tbody></table> <p><a name="requestAuthorization"></a></p> <h2 id="requestauthorization"><a href="#requestauthorization" class="header-anchor">#</a> requestAuthorization()</h2> <p>Sends a &quot;407 Proxy Authentication Required&quot; HTTP response to the <code>socket</code>.</p> <p><strong>Kind</strong>: global function<br> <strong>Api</strong>: private<br> <a name="webapp"></a></p> <h2 id="webapp-2"><a href="#webapp-2" class="header-anchor">#</a> webapp()</h2> <p>创建一个基于koa2的web应用。</p> <p><strong>Kind</strong>: global function<br> <a name="body"></a></p> <h2 id="body"><a href="#body" class="header-anchor">#</a> body()</h2> <p>创建一个body解析器中间件，详细选项设置请参考body模块。</p> <p><strong>Kind</strong>: global function<br> <a name="send"></a></p> <h2 id="send"><a href="#send" class="header-anchor">#</a> send()</h2> <p>发送http响应</p> <p><strong>Kind</strong>: global function<br> <a name="sendFile"></a></p> <h2 id="sendfile"><a href="#sendfile" class="header-anchor">#</a> sendFile()</h2> <p>发送响应文件。</p> <p><strong>Kind</strong>: global function<br> <a name="handler"></a></p> <h2 id="handler"><a href="#handler" class="header-anchor">#</a> handler()</h2> <p>将func函数包装成一个中间件</p> <p><strong>Kind</strong>: global function</p> <p><a name="rules"></a></p> <h2 id="rules"><a href="#rules" class="header-anchor">#</a> rules</h2> <p>数据格式校验规则，其中包含两类：</p> <ul><li>正则表达式</li> <li>接口：{test: (val)=&gt;boolean}</li></ul> <p><strong>Kind</strong>: global variable<br> <a name="MS_PER_SECOND"></a></p> <h2 id="ms-per-second"><a href="#ms-per-second" class="header-anchor">#</a> MS_PER_SECOND</h2> <p>常量：每秒钟的毫秒数</p> <p><strong>Kind</strong>: global variable<br> <a name="MS_PER_MINUTE"></a></p> <h2 id="ms-per-minute"><a href="#ms-per-minute" class="header-anchor">#</a> MS_PER_MINUTE</h2> <p>常量：每分钟的毫秒数</p> <p><strong>Kind</strong>: global variable<br> <a name="MS_PER_HOUR"></a></p> <h2 id="ms-per-hour"><a href="#ms-per-hour" class="header-anchor">#</a> MS_PER_HOUR</h2> <p>常量：每小时的毫秒数</p> <p><strong>Kind</strong>: global variable<br> <a name="MS_PER_DAY"></a></p> <h2 id="ms-per-day"><a href="#ms-per-day" class="header-anchor">#</a> MS_PER_DAY</h2> <p>常量：每天的毫秒数</p> <p><strong>Kind</strong>: global variable<br> <a name="MS_PER_WEEK"></a></p> <h2 id="ms-per-week"><a href="#ms-per-week" class="header-anchor">#</a> MS_PER_WEEK</h2> <p>常量：每周的毫秒数</p> <p><strong>Kind</strong>: global variable<br> <a name="error"></a></p> <h2 id="error-错误名称-推荐使用形如-err-invalid-args-的命名规则-具体业务不做强制要求。-message-⇒-error"><a href="#error-错误名称-推荐使用形如-err-invalid-args-的命名规则-具体业务不做强制要求。-message-⇒-error" class="header-anchor">#</a> error(错误名称，推荐使用形如‘ERR_INVALID_ARGS’的命名规则，具体业务不做强制要求。, message) ⇒ <code>Error</code></h2> <p>构造一个新的错误对象，一般调用方式形如：throw error('ERR_NAME', 'message');</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>Error</code> - 构建的错误对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>错误名称，推荐使用形如‘ERR_INVALID_ARGS’的命名规则，具体业务不做强制要求。</td> <td><code>name</code></td> <td></td></tr> <tr><td>message</td> <td><code>string</code></td> <td>错误信息</td></tr></tbody></table> <p><a name="checkError"></a></p> <h2 id="checkerror"><a href="#checkerror" class="header-anchor">#</a> checkError()</h2> <p>检查错误，此函数会检查形如（err, ret）的错误。检查规则：</p> <ul><li>err是一个Error实例，返回true。</li> <li>ret.result !== 'ok', 返回true。</li></ul> <p><strong>Kind</strong>: global function<br> <a name="make"></a></p> <h2 id="make"><a href="#make" class="header-anchor">#</a> make()</h2> <p>包装函数参数到一个通用操作封包对象，此函数可能的使用场景如下：</p> <div class="language- extra-class"><pre class="language-text"><code>makeCOP(err);
makeCOP(ret);
makeCOP(null, ret);
</code></pre></div><p><strong>Kind</strong>: global function<br> <a name="hash"></a></p> <h2 id="hash-alg-data-⇒-string"><a href="#hash-alg-data-⇒-string" class="header-anchor">#</a> hash(alg, data) ⇒ <code>string</code></h2> <p>用指定hash算法计算data的hash编码。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - data的hash值</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>alg</td> <td><code>string</code></td> <td>hash算法的名称</td></tr> <tr><td>data</td> <td><code>string</code> | <code>Buffer</code></td> <td>用来做hash计算的数据</td></tr></tbody></table> <p><a name="md5"></a></p> <h2 id="md5-data-⇒-string"><a href="#md5-data-⇒-string" class="header-anchor">#</a> md5(data) ⇒ <code>string</code></h2> <p>计算data的md5值</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - data的md5值</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>data</td> <td><code>string</code> | <code>Buffer</code></td> <td>用于做md5计算的数据</td></tr></tbody></table> <p><a name="sha256"></a></p> <h2 id="sha256-data-⇒-string"><a href="#sha256-data-⇒-string" class="header-anchor">#</a> sha256(data) ⇒ <code>string</code></h2> <p>计算data的sha256值</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - data的sha256值</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>data</td> <td><code>string</code> | <code>Buffer</code></td> <td>用于计算sha256的数据</td></tr></tbody></table> <p><a name="encode_aes_256_cbc"></a></p> <h2 id="encode-aes-256-cbc-key-content-⇒-string"><a href="#encode-aes-256-cbc-key-content-⇒-string" class="header-anchor">#</a> encode_aes_256_cbc(key, content) ⇒ <code>string</code></h2> <p>使用aes-256-cbc算法对数据进行编码</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 加密后的密文</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>string</code></td> <td>用于加密的密钥</td></tr> <tr><td>content</td> <td><code>string</code></td> <td>被加密的数据</td></tr></tbody></table> <p><a name="decode_aes_256_cbc"></a></p> <h2 id="decode-aes-256-cbc-key-content-⇒-string"><a href="#decode-aes-256-cbc-key-content-⇒-string" class="header-anchor">#</a> decode_aes_256_cbc(key, content) ⇒ <code>string</code></h2> <p>对一串使用aes-256-cbc算法加密的密文进行解码</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 解码后的数据</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td><code>string</code></td> <td>解密密钥</td></tr> <tr><td>content</td> <td><code>string</code></td> <td>密文数据</td></tr></tbody></table> <p><a name="encode_base64"></a></p> <h2 id="encode-base64-content-⇒-string"><a href="#encode-base64-content-⇒-string" class="header-anchor">#</a> encode_base64(content) ⇒ <code>string</code></h2> <p>对数据进行base64编码</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - base64字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>content</td> <td><code>string</code></td> <td>用于base64编码的数据</td></tr></tbody></table> <p><a name="decode_base64"></a></p> <h2 id="decode-base64-content-⇒-string"><a href="#decode-base64-content-⇒-string" class="header-anchor">#</a> decode_base64(content) ⇒ <code>string</code></h2> <p>对base64编码的字符串进行解码</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - base64解码后的数据</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>content</td> <td><code>string</code></td> <td>base64编码字符串</td></tr></tbody></table> <p><a name="encode_hex64"></a></p> <h2 id="encode-hex64-content-⇒"><a href="#encode-hex64-content-⇒" class="header-anchor">#</a> encode_hex64(content) ⇒</h2> <p>将一段十六进制的字符串进行base64编码</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: 编码后的数据</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>content</td> <td><code>string</code></td> <td>十六进制字符串</td></tr></tbody></table> <p><a name="decode_hex64"></a></p> <h2 id="decode-hex64-content-⇒-string"><a href="#decode-hex64-content-⇒-string" class="header-anchor">#</a> decode_hex64(content) ⇒ <code>string</code></h2> <p>对一段被base64编码过的十六进制字符串进行解码</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 十六进制字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>content</td> <td><code>string</code></td> <td>base64字符串</td></tr></tbody></table> <p><a name="rs"></a></p> <h2 id="rs-length-characters-⇒-string"><a href="#rs-length-characters-⇒-string" class="header-anchor">#</a> rs(length, characters) ⇒ <code>string</code></h2> <p>获取一个随机字符串（random string）</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 随机字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>length</td> <td><code>number</code></td> <td>随机字符串的长度</td></tr> <tr><td>characters</td> <td><code>Array.&lt;char&gt;</code></td> <td>随机字符串的字符表，随机字符串中的所有字符将从此自负表中随机抽取。</td></tr></tbody></table> <p><a name="rsod"></a></p> <h2 id="rsod-len-⇒-string"><a href="#rsod-len-⇒-string" class="header-anchor">#</a> rsod(len) ⇒ <code>string</code></h2> <p>获取一个十进制的随机数字字符串（random string of digit）</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 随机十进制数字字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>len</td> <td><code>number</code></td> <td>字符串的长度</td></tr></tbody></table> <p><a name="rsox"></a></p> <h2 id="rsox-len-⇒-string"><a href="#rsox-len-⇒-string" class="header-anchor">#</a> rsox(len) ⇒ <code>string</code></h2> <p>获取一个十六进制的随机数字字符串（random string of hex）</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 随机十六进制数字字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>len</td> <td><code>number</code></td> <td>字符串的长度</td></tr></tbody></table> <p><a name="rsoa"></a></p> <h2 id="rsoa-len-⇒-string"><a href="#rsoa-len-⇒-string" class="header-anchor">#</a> rsoa(len) ⇒ <code>string</code></h2> <p>获取一个随机字母字符串（random string of alpha）</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 随机字母字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>len</td> <td><code>number</code></td> <td>字符串的长度</td></tr></tbody></table> <p><a name="rsow"></a></p> <h2 id="rsow-len-⇒-string"><a href="#rsow-len-⇒-string" class="header-anchor">#</a> rsow(len) ⇒ <code>string</code></h2> <p>获取一个由数字、字母组成的随机字符串（random string of word）</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 由数字、字母组成的随机字符串.</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>len</td> <td><code>number</code></td> <td>字符串的长度</td></tr></tbody></table> <p><a name="rsop"></a></p> <h2 id="rsop-len-⇒-string"><a href="#rsop-len-⇒-string" class="header-anchor">#</a> rsop(len) ⇒ <code>string</code></h2> <p>获取一个由可打印字符组成的随机字符串（random string of printable)</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>string</code> - 一个由可打印字符组成的随机字符串</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>len</td> <td><code>number</code></td> <td>字符串长度</td></tr></tbody></table> <p><a name="create"></a></p> <h2 id="create-⇒-flake"><a href="#create-⇒-flake" class="header-anchor">#</a> create() ⇒ <a href="#Flake"><code>Flake</code></a></h2> <p>创建一个flake对象</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <a href="#Flake"><code>Flake</code></a> - 雪花算法唯一编码生成器对象</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>节点编号，0-255.</td> <td><code>number</code></td></tr></tbody></table> <p><a name="has"></a></p> <h2 id="has-obj-field-⇒-boolean"><a href="#has-obj-field-⇒-boolean" class="header-anchor">#</a> has(obj, field) ⇒ <code>boolean</code></h2> <p>obj中是否存在field字段</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>boolean</code> - 结果</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>obj</td> <td><code>object</code></td> <td>待检查的对象</td></tr> <tr><td>field</td> <td><code>string</code></td> <td>待检查的字段名称</td></tr></tbody></table> <p><a name="hasOne"></a></p> <h2 id="hasone-obj-fields-⇒-boolean"><a href="#hasone-obj-fields-⇒-boolean" class="header-anchor">#</a> hasOne(obj, fields) ⇒ <code>boolean</code></h2> <p>字段列表中的其中一个字段在obj中是否存在。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>boolean</code> - 结果</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>obj</td> <td><code>object</code></td> <td>待检查的对象</td></tr> <tr><td>fields</td> <td><code>Array.&lt;string&gt;</code></td> <td>待检查的字段列表</td></tr></tbody></table> <p><a name="hasAll"></a></p> <h2 id="hasall-obj-fields-⇒-boolean"><a href="#hasall-obj-fields-⇒-boolean" class="header-anchor">#</a> hasAll(obj, fields) ⇒ <code>boolean</code></h2> <p>字段列表中的字段在obj中是否全部存在。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>boolean</code> - 结果</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>obj</td> <td><code>object</code></td> <td>待检查的对象</td></tr> <tr><td>fields</td> <td><code>Array.&lt;string&gt;</code></td> <td>待检查的字段列表</td></tr></tbody></table> <p><a name="assertOne"></a></p> <h2 id="assertone-obj-fields"><a href="#assertone-obj-fields" class="header-anchor">#</a> assertOne(obj, fields)</h2> <p>断言字段列表fields中的字段在对象obj中至少存在一个。如果断言失败，会抛出错误。</p> <p><strong>Kind</strong>: global function</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>obj</td> <td><code>object</code></td> <td>待检查的对象</td></tr> <tr><td>fields</td> <td><code>Array.&lt;string&gt;</code></td> <td>待检查的字段列表</td></tr></tbody></table> <p><a name="assertAll"></a></p> <h2 id="assertall-obj-fields"><a href="#assertall-obj-fields" class="header-anchor">#</a> assertAll(obj, fields)</h2> <p>断言字段列表fields中的全部字段在对象obj中都存在。断言失败会抛出错误。</p> <p><strong>Kind</strong>: global function</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>obj</td> <td><code>object</code></td> <td>待检查的对象</td></tr> <tr><td>fields</td> <td><code>Array.&lt;string&gt;</code></td> <td>待检查的字段列表</td></tr></tbody></table> <p><a name="optional"></a></p> <h2 id="optional-field-format-minlen-maxlen-defaultvalue-⇒-boolean"><a href="#optional-field-format-minlen-maxlen-defaultvalue-⇒-boolean" class="header-anchor">#</a> optional(field, format, minlen, maxlen, defaultValue) ⇒ <code>boolean</code></h2> <p>可选项检查，如果字段存在就进行数据格式校验，如果字段不存在就返回默认值。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>boolean</code> - 字段是否存在</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>field</td> <td><code>T</code></td> <td>待检查的字段值</td></tr> <tr><td>format</td> <td><code>string</code> | <code>RegExp</code></td> <td>校验规则</td></tr> <tr><td>minlen</td> <td><code>number</code></td> <td>最小长度</td></tr> <tr><td>maxlen</td> <td><code>number</code></td> <td>最大长度</td></tr> <tr><td>defaultValue</td> <td><code>T</code></td> <td>默认值</td></tr></tbody></table> <p><a name="required"></a></p> <h2 id="required-field-format-minlen-maxlen-⇒-boolean"><a href="#required-field-format-minlen-maxlen-⇒-boolean" class="header-anchor">#</a> required(field, format, minlen, maxlen) ⇒ <code>boolean</code></h2> <p>必备项检查，如果字段存在就进行数据格式校验，如果字段不存在就抛出错误。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>boolean</code> - 字段是否存在</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>field</td> <td><code>T</code></td> <td>待检查的字段值</td></tr> <tr><td>format</td> <td><code>string</code> | <code>RegExp</code></td> <td>校验规则</td></tr> <tr><td>minlen</td> <td><code>number</code></td> <td>最小长度</td></tr> <tr><td>maxlen</td> <td><code>number</code></td> <td>最大长度</td></tr></tbody></table> <p><a name="decompress"></a></p> <h2 id="decompress"><a href="#decompress" class="header-anchor">#</a> decompress()</h2> <p>对http响应数据进行解压。如果http响应数据采用了gzip压缩，就进行解压，否则什么都不做。</p> <p><strong>Kind</strong>: global function<br> <a name="decode"></a></p> <h2 id="decode"><a href="#decode" class="header-anchor">#</a> decode()</h2> <p>对http响应数据进行解码。如果http响应数据采用了特殊编码格式就进行解码，否则什么都不做。</p> <p><strong>Kind</strong>: global function<br> <a name="escape"></a></p> <h2 id="escape"><a href="#escape" class="header-anchor">#</a> escape()</h2> <p>对HTML字符串中的特殊字符进行转义。</p> <p><strong>Kind</strong>: global function<br> <a name="init"></a></p> <h2 id="init-scope"><a href="#init-scope" class="header-anchor">#</a> init(scope)</h2> <p>初始化日志模块</p> <p><strong>Kind</strong>: global function</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>scope</td> <td><code>string</code></td> <td>日志的前缀标签</td></tr></tbody></table> <p><a name="init"></a></p> <h2 id="init"><a href="#init" class="header-anchor">#</a> init()</h2> <p>初始化全局MySql对象</p> <p><strong>Kind</strong>: global function<br> <a name="connect"></a></p> <h2 id="connect-transaction-⇒-connection"><a href="#connect-transaction-⇒-connection" class="header-anchor">#</a> connect(transaction) ⇒ <a href="#Connection"><code>Connection</code></a></h2> <p>连接数据库</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <a href="#Connection"><code>Connection</code></a> - 数据库连接对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>transaction</td> <td><code>boolean</code></td> <td>开启事务</td></tr></tbody></table> <p><a name="transaction"></a></p> <h2 id="transaction"><a href="#transaction" class="header-anchor">#</a> transaction()</h2> <p>连接数据库并开启事务。</p> <p><strong>Kind</strong>: global function<br> <a name="query"></a></p> <h2 id="query-sql-logsql-⇒-any"><a href="#query-sql-logsql-⇒-any" class="header-anchor">#</a> query(sql, logsql) ⇒ <code>any</code></h2> <p>连接数据库，执行一次SQL查询，并自动释放连接。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>any</code> - 查询结果集</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>sql</td> <td><code>string</code></td> <td>SQL语句</td></tr> <tr><td>logsql</td> <td><code>boolean</code></td> <td>是否打印SQL语句</td></tr></tbody></table> <p><a name="page"></a></p> <h2 id="page-sql-page-size-⇒-any"><a href="#page-sql-page-size-⇒-any" class="header-anchor">#</a> page(sql, page, size) ⇒ <code>any</code></h2> <p>连接数据库，执行一次分页查询，并自动释放连接。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <code>any</code> - 查询结果集</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>sql</td> <td><code>string</code></td> <td>SQL语句</td></tr> <tr><td>page</td> <td><code>number</code></td> <td>当前页码，从1开始。</td></tr> <tr><td>size</td> <td><code>number</code></td> <td>每页的数据条数</td></tr></tbody></table> <p><a name="exec"></a></p> <h2 id="exec"><a href="#exec" class="header-anchor">#</a> exec()</h2> <p>执行一条命令</p> <p><strong>Kind</strong>: global function<br> <a name="execSync"></a></p> <h2 id="execsync"><a href="#execsync" class="header-anchor">#</a> execSync()</h2> <p>同步执行一调命令</p> <p><strong>Kind</strong>: global function<br> <a name="duration"></a></p> <h2 id="duration-ms-⇒-duration"><a href="#duration-ms-⇒-duration" class="header-anchor">#</a> duration(ms) ⇒ <a href="#Duration"><code>Duration</code></a></h2> <p>创建一个时间段对象</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <a href="#Duration"><code>Duration</code></a> - 时间段对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>ms</td> <td><code>number</code></td> <td>时间段的毫秒数</td></tr></tbody></table> <p><a name="span"></a></p> <h2 id="span-begintimestamp-endtimestamp-⇒-timespan"><a href="#span-begintimestamp-endtimestamp-⇒-timespan" class="header-anchor">#</a> span(beginTimeStamp, endTimeStamp) ⇒ <a href="#TimeSpan"><code>TimeSpan</code></a></h2> <p>创建一个时间区间对象。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <a href="#TimeSpan"><code>TimeSpan</code></a> - 时间区间对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>beginTimeStamp</td> <td><code>number</code> | <a href="#TimePoint"><code>TimePoint</code></a></td> <td>开始时刻</td></tr> <tr><td>endTimeStamp</td> <td><code>number</code> | <a href="#TimePoint"><code>TimePoint</code></a></td> <td>结束时刻</td></tr></tbody></table> <p><a name="point"></a></p> <h2 id="point-timestamp-⇒-timepoint"><a href="#point-timestamp-⇒-timepoint" class="header-anchor">#</a> point(timestamp) ⇒ <a href="#TimePoint"><code>TimePoint</code></a></h2> <p>创建一个时间点对象。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 时间点对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>timestamp</td> <td><code>number</code></td> <td>时间戳</td></tr></tbody></table> <p><a name="now"></a></p> <h2 id="now"><a href="#now" class="header-anchor">#</a> now()</h2> <p>获取现在时刻的时间点对象。</p> <p><strong>Kind</strong>: global function<br> <a name="utc"></a></p> <h2 id="utc"><a href="#utc" class="header-anchor">#</a> utc()</h2> <p>获取dateTime结构所描述的UTC时间点。</p> <p><strong>Kind</strong>: global function<br> <a name="parse"></a></p> <h2 id="parse"><a href="#parse" class="header-anchor">#</a> parse()</h2> <p>解析时间字符串，相当于Date.parse()。</p> <p><strong>Kind</strong>: global function<br> <a name="add"></a></p> <h2 id="add-timepoint-duration-⇒-timepoint"><a href="#add-timepoint-duration-⇒-timepoint" class="header-anchor">#</a> add(timePoint, duration) ⇒ <a href="#TimePoint"><code>TimePoint</code></a></h2> <p>计算时间点timePoint加上时间段duration的时间点。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 结果时间点对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>timePoint</td> <td><a href="#TimePoint"><code>TimePoint</code></a></td> <td>时间点对象</td></tr> <tr><td>duration</td> <td><a href="#Duration"><code>Duration</code></a></td> <td>时间段对象</td></tr></tbody></table> <p><a name="sub"></a></p> <h2 id="sub-timepoint-duration-⇒-timepoint"><a href="#sub-timepoint-duration-⇒-timepoint" class="header-anchor">#</a> sub(timePoint, duration) ⇒ <a href="#TimePoint"><code>TimePoint</code></a></h2> <p>计算时间点timePoint减去时间段duration的时间点。</p> <p><strong>Kind</strong>: global function<br> <strong>Returns</strong>: <a href="#TimePoint"><code>TimePoint</code></a> - 结果时间点对象</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>timePoint</td> <td><a href="#TimePoint"><code>TimePoint</code></a></td> <td>时间点对象</td></tr> <tr><td>duration</td> <td><a href="#Duration"><code>Duration</code></a></td> <td>时间段对象</td></tr></tbody></table> <p><a name="delay"></a></p> <h2 id="delay-time"><a href="#delay-time" class="header-anchor">#</a> delay(time)</h2> <p>延迟，一般用法为:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">// 延迟0.5秒</span>
</code></pre></div><p><strong>Kind</strong>: global function</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>time</td> <td><code>number</code></td> <td>需要延迟的时间，单位为秒。</td></tr></tbody></table> <p><a name="absolutePath"></a></p> <h2 id="absolutepath"><a href="#absolutepath" class="header-anchor">#</a> absolutePath()</h2> <p>获取路径p的绝对路径</p> <ul><li>如果p以 '/' 开始，返回相对于当前进程cwd的绝对路径。</li></ul> <p><strong>Kind</strong>: global function<br> <a name="camelCase"></a></p> <h2 id="camelcase"><a href="#camelcase" class="header-anchor">#</a> camelCase()</h2> <p>获取name的驼峰形式。如：</p> <div class="language- extra-class"><pre class="language-text"><code>get_user_info =&gt; getUserInfo
_get_user_info =&gt; GetUserInfo
</code></pre></div><p><strong>Kind</strong>: global function<br> <a name="camelCaseKeys"></a></p> <h2 id="camelcasekeys"><a href="#camelcasekeys" class="header-anchor">#</a> camelCaseKeys()</h2> <p>将对象obj的key全部变成驼峰形式。</p> <p><strong>Kind</strong>: global function<br> <a name="compareVersion"></a></p> <h2 id="compareversion-versiona-versionb-⇒-number"><a href="#compareversion-versiona-versionb-⇒-number" class="header-anchor">#</a> compareVersion(versionA, versionB) ⇒ <code>number</code></h2> <p>对两个版本进行比较</p> <ul><li>versionA === versionB：返回 0</li> <li>versionA &lt; versionB： 返回 -1</li> <li>versionA &gt; versionB： 返回 1</li></ul> <p><strong>Kind</strong>: global function</p> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>versionA</td> <td><code>string</code></td> <td>第一个版本号字符串</td></tr> <tr><td>versionB</td> <td><code>string</code></td> <td>第二个版本号字符串</td></tr></tbody></table> <p><a name="computeGeoDistance"></a></p> <h2 id="computegeodistance"><a href="#computegeodistance" class="header-anchor">#</a> computeGeoDistance()</h2> <p>计算地球球面上两个经纬点之间的地理距离。</p> <p><strong>Kind</strong>: global function</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b9d05ae7.js" defer></script><script src="/assets/js/2.926c100e.js" defer></script><script src="/assets/js/7.5bba90ff.js" defer></script>
  </body>
</html>
